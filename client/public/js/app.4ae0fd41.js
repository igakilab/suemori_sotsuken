(function(e){function t(t){for(var a,i,c=t[0],s=t[1],l=t[2],u=0,m=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0a97":function(e,t,n){"use strict";var a=n("3818"),r=n.n(a);r.a},1175:function(e,t,n){},"1f65":function(e,t,n){"use strict";var a=n("811e"),r=n.n(a);r.a},2625:function(e,t,n){"use strict";var a=n("b58e"),r=n.n(a);r.a},"29dc":function(e,t,n){"use strict";var a=n("e2ae"),r=n.n(a);r.a},3632:function(e,t,n){},3818:function(e,t,n){},"4b0e":function(e,t,n){"use strict";var a=n("7d66"),r=n.n(a);r.a},"4e2d":function(e,t,n){},"68e4":function(e,t,n){"use strict";var a=n("4e2d"),r=n.n(a);r.a},"6ea0":function(e,t,n){"use strict";var a=n("e208"),r=n.n(a);r.a},"7d66":function(e,t,n){},"811e":function(e,t,n){},b58e:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i={name:"app"},c=i,s=n("2877"),l=Object(s["a"])(c,r,o,!1,null,null,null),d=l.exports,u=n("2f62");a["default"].use(u["a"]);var m=new u["a"].Store({}),b=n("ecee"),p=n("c074"),h=n("f2d1"),f=n("b702"),y=n("ad3d"),v=n("5f5b"),O=(n("f9e3"),n("2dd8"),n("45fc"),n("8c4f")),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"game"}},[n("b-modal",{attrs:{id:"resultModal","ok-only":""},on:{ok:e.redoRoom}},[e.judge===e.JUDGE.DRAW?n("div",[e._v("DRAW!!")]):e.judge===e.JUDGE.P1_WIN&&e.isPlayer1||e.judge===e.JUDGE.P2_WIN&&!e.isPlayer1?n("div",[e._v(" You are WIN!! ")]):e.judge===e.JUDGE.P2_WIN&&e.isPlayer1||e.judge===e.JUDGE.P1_WIN&&!e.isPlayer1?n("div",[e._v(" You are Lose... ")]):e._e()]),e.playing?n("b-alert",{attrs:{show:"",variant:"success"}},[e._v("次の動作まで残り"),n("span",{staticStyle:{"font-size":"xx-large",margin:"10px"}},[e._v(e._s(e.waitTime-e.elapsedTime%(e.waitTime+1)))]),e._v("秒"),n("b-spinner",{staticStyle:{"margin-left":"15px"},attrs:{variant:"success",label:"Spinning"}})],1):n("b-alert",{attrs:{show:"",variant:"primary"}},[e._v("プレイヤーを待機しています…"),n("b-spinner",{staticStyle:{"margin-left":"10px"},attrs:{variant:"primary",label:"Spinning"}})],1),n("div",{attrs:{id:"game1"}},[n("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"10px","margin-left":"220px"}},[n("P1ExecuteCommand",{staticStyle:{float:"left","margin-right":"90px"},attrs:{command:e.executePlayer1command}}),n("P2ExecuteCommand",{staticStyle:{float:"left"},attrs:{command:e.executePlayer2command}})],1),n("Command",{staticStyle:{float:"left"},attrs:{player1:!0,turn:e.isPlayer1,command:e.player1command,preCommand:e.prePlayer1command,bomb:e.player1bomb,unknownMode:!e.isPlayer1&&e.unknownMode}}),n("div",{staticStyle:{float:"left"}},[n("Board",{ref:"ref_board",staticStyle:{"margin-bottom":"10px"},attrs:{board:e.board}}),n("Logs",{staticStyle:{clear:"both","margin-right":"20px"},attrs:{logs:e.logs}}),n("p",{staticStyle:{width:"350px","padding-top":"10px",float:"left"}},[e._v(" ※コマンドを全て埋めない場合、ターン終了時自動的に移動コマンドが挿入されます。 ")])],1),n("div",{staticStyle:{float:"left"}},[n("Command",{staticStyle:{float:"left"},attrs:{player1:!1,turn:!e.isPlayer1,command:e.player2command,preCommand:e.prePlayer2command,bomb:e.player2bomb,unknownMode:e.isPlayer1&&e.unknownMode}}),n("Controller",{staticStyle:{clear:"both","margin-top":"540px","margin-left":"50px"},attrs:{disabledUp:e.disabledUp,disabledLeft:e.disabledLeft,disabledRight:e.disabledRight,disabledDown:e.disabledDown,disabledBomb:e.disabledBomb,disabledRedo:e.disabledRedo,disabledEnd:e.disabledEnd},on:{click:e.setCommand}})],1)],1)],1)},_=[],w=(n("99af"),n("cb29"),n("4de4"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("a9e3"),n("d3b7"),n("ac1f"),n("2532"),n("1276"),n("159b"),n("96cf"),n("9f12")),x=n("53fe"),M=n("8b83"),R=n("c65a"),N=n("c03e"),P=n("463f"),E=n("ce07"),L=n("d673"),k=n("9ab4"),D=[[[0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,1,1,1,0,1,0,1,1,0,1,1,1,0,1,0],[0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0],[1,0,1,0,1,1,0,0,0,1,1,1,1,1,0,0,0,0,1,0],[0,0,0,0,0,1,1,1,0,1,0,0,0,0,1,1,0,1,1,0],[0,1,1,1,0,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0],[0,1,1,1,0,1,1,1,1,1,0,1,0,0,0,0,1,1,1,0],[0,0,0,1,0,0,0,0,1,0,0,1,0,1,1,0,0,0,1,0],[1,1,0,1,1,1,1,1,1,0,1,1,0,0,1,1,1,0,1,1],[1,0,0,0,0,0,1,1,0,0,0,0,1,0,1,1,0,0,1,0],[1,0,1,1,1,0,0,0,1,0,1,0,0,0,0,0,1,1,0,0],[1,0,1,0,1,1,1,0,1,0,1,1,0,1,1,0,0,0,0,1],[0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,1,1,1,0,0],[0,1,1,1,0,1,0,1,0,0,1,1,0,1,0,1,1,0,1,0],[0,0,0,1,0,1,0,0,1,0,1,1,0,1,0,0,0,0,0,0],[1,1,0,1,0,1,0,1,1,0,0,1,0,1,1,0,1,1,1,0],[0,0,0,1,0,1,1,1,1,1,0,1,0,1,1,0,0,0,1,0],[0,1,1,1,0,1,0,0,0,0,0,1,0,0,0,1,1,0,1,1],[0,1,0,0,0,1,0,1,1,1,0,0,1,1,0,1,0,0,0,0],[0,0,0,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,0]],[[0,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,1,0,0,0,0,0],[0,1,1,0,1,1,1,0,1,1,0],[0,1,0,0,0,0,0,0,0,1,0],[0,0,0,1,0,1,0,1,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[1,1,0,1,0,1,0,1,0,1,1],[0,1,0,0,0,0,0,0,0,1,0],[0,0,0,1,0,1,0,1,0,0,0],[0,1,0,0,0,0,0,0,0,1,0],[0,1,1,0,1,1,1,0,1,1,0],[0,0,0,0,0,1,0,0,0,0,0]],[[0,0,0,0,1,1,1,0,0,0,0],[0,1,0,0,1,1,1,0,0,1,0],[0,1,1,0,0,1,0,0,1,1,0],[0,0,1,1,0,1,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,1,1,1,0,0,0,1],[1,1,0,0,0,0,0,0,0,1,1],[1,0,0,1,1,0,1,1,0,0,1],[0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,1,0,0,1,1,0],[0,0,0,0,1,1,1,0,0,0,0]],[[0,0,0,0,0,0,0],[0,1,0,1,0,1,0],[0,0,0,0,0,0,0],[0,1,0,1,0,1,0],[0,0,0,0,0,0,0],[0,1,0,1,0,1,0],[0,0,0,0,0,0,0]],[[0,0,1,1,1,0,0],[0,0,0,1,0,0,0],[1,0,0,0,0,0,1],[1,1,0,1,0,1,1],[1,0,0,0,0,0,1],[0,0,0,1,0,0,0],[0,0,1,1,1,0,0]]],A=D[6],B=n("59ca"),j=n.n(B),T=(n("66ce"),n("ea7b"),{apiKey:"AIzaSyDX5Eggo0Hjqq1snz-gTS8mlzbnOcCw1bc",authDomain:"bomber-3f3fd.firebaseapp.com",databaseURL:"https://bomber-3f3fd.firebaseio.com",projectId:"bomber-3f3fd",storageBucket:"bomber-3f3fd.appspot.com",messagingSenderId:"834527661420",appId:"1:834527661420:web:2b3b5a5059141eb6c6b749"});j.a.initializeApp(T);var S=j.a,U=n("60a3"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-right":"20px"}},[e.player1?n("div",[n("div",[n("table",[e._m(0),n("tr",[n("td",[n("PreCommand",{attrs:{command:e.preCommand,unknownMode:e.unknownMode}})],1),n("td",[n("NextCommand",{attrs:{command:e.command,unknownMode:e.unknownMode}})],1)])])])]):n("div",[n("table",[e._m(1),n("tr",[n("td",[n("NextCommand",{attrs:{command:e.command,unknownMode:e.unknownMode}})],1),n("td",[n("PreCommand",{attrs:{command:e.preCommand,unknownMode:e.unknownMode}})],1)])])]),n("div",{staticClass:"btn-square",class:e.turn?e.player1?"player1":"player2":"player",staticStyle:{"margin-top":"20px"},attrs:{id:"player1button"}},[e._v(" "+e._s(e.player1?1:2)+"P ")]),n("div",{staticStyle:{"margin-top":"20px"}},[n("font-awesome-icon",{staticStyle:{cursor:"pointer",position:"display: inline-block"},attrs:{icon:"bomb",size:"2x"}}),n("div",{staticStyle:{"margin-top":"0px",display:"inline-block","margin-left":"10px","margin-right":"10px"}},[e._v(" x ")]),n("div",{staticClass:"bomb",staticStyle:{display:"inline-block"}},[e._v(" "+e._s(e.bomb>=0?e.bomb:"-")+" ")])],1)])},I=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("td",{staticStyle:{"text-align":"center","padding-right":"20px","vertical-align":"bottom"}},[e._v(" next ")]),n("td",{staticStyle:{"text-align":"center","padding-right":"20px"}},[e._v("now")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("td",{staticStyle:{"text-align":"center","padding-right":"20px","vertical-align":"bottom"}},[e._v(" now ")]),n("td",{staticStyle:{"text-align":"center","padding-right":"20px"}},[e._v("next")])])}],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-right":"20px"}},e._l(e.command,(function(t,a){return n("div",{key:a,class:[e.MOVE.RANDOM_UP,e.MOVE.RANDOM_LEFT,e.MOVE.RANDOM_RIGHT,e.MOVE.RANDOM_DOWN].includes(t)?"triangle":"frame_stroke_rect"},[e.unknownMode||t!==e.MOVE.UP&&t!==e.MOVE.RANDOM_UP?e.unknownMode||t!==e.MOVE.LEFT&&t!==e.MOVE.RANDOM_LEFT?e.unknownMode||t!==e.MOVE.RIGHT&&t!==e.MOVE.RANDOM_RIGHT?e.unknownMode||t!==e.MOVE.DOWN&&t!==e.MOVE.RANDOM_DOWN?e.unknownMode||t!==e.MOVE.BOMB?t!==e.MOVE.NULL&&e.unknownMode?n("font-awesome-icon",{attrs:{icon:"question-circle",size:"4x"}}):e._e():n("font-awesome-icon",{attrs:{icon:"bomb",size:"4x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-down",size:"4x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-right",size:"4x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-left",size:"4x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-up",size:"4x"}})],1)})),0)},$=[],W=function(e){function t(){return Object(w["a"])(this,t),Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments))}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"MOVE",get:function(){return ze}}]),t}(U["c"]);k["__decorate"]([Object(U["b"])()],W.prototype,"command",void 0),k["__decorate"]([Object(U["b"])({default:!1})],W.prototype,"unknownMode",void 0),W=k["__decorate"]([U["a"]],W);var V=W,F=V,Y=(n("6ea0"),Object(s["a"])(F,z,$,!1,null,"1cbd6bf3",null)),G=Y.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-right":"20px"}},e._l(e.command,(function(t,a){return n("div",{key:a,staticClass:"frame_stroke_rect"},[e.unknownMode||t!==e.MOVE.UP?e.unknownMode||t!==e.MOVE.LEFT?e.unknownMode||t!==e.MOVE.RIGHT?e.unknownMode||t!==e.MOVE.DOWN?e.unknownMode||t!==e.MOVE.BOMB?t!==e.MOVE.NULL&&e.unknownMode?n("font-awesome-icon",{attrs:{icon:"question-circle",size:"5x"}}):e._e():n("font-awesome-icon",{attrs:{icon:"bomb",size:"5x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-down",size:"5x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-right",size:"5x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-left",size:"5x"}}):n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-up",size:"5x"}})],1)})),0)},J=[],q=function(e){function t(){return Object(w["a"])(this,t),Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments))}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"MOVE",get:function(){return ze}}]),t}(U["c"]);k["__decorate"]([Object(U["b"])()],q.prototype,"command",void 0),k["__decorate"]([Object(U["b"])({default:!1})],q.prototype,"unknownMode",void 0),q=k["__decorate"]([U["a"]],q);var X=q,K=X,Q=(n("1f65"),Object(s["a"])(K,H,J,!1,null,"5e84fd32",null)),Z=Q.exports,ee=function(e){function t(){return Object(w["a"])(this,t),Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments))}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"MOVE",get:function(){return ze}}]),t}(U["c"]);k["__decorate"]([Object(U["b"])({default:!0})],ee.prototype,"player1",void 0),k["__decorate"]([Object(U["b"])({default:5})],ee.prototype,"bomb",void 0),k["__decorate"]([Object(U["b"])({default:!0})],ee.prototype,"turn",void 0),k["__decorate"]([Object(U["b"])()],ee.prototype,"command",void 0),k["__decorate"]([Object(U["b"])()],ee.prototype,"preCommand",void 0),k["__decorate"]([Object(U["b"])({default:!1})],ee.prototype,"unknownMode",void 0),ee=k["__decorate"]([Object(U["a"])({components:{PreCommand:G,NextCommand:Z}})],ee);var te=ee,ne=te,ae=(n("ed33"),Object(s["a"])(ne,C,I,!1,null,"d06eae5c",null)),re=ae.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{float:"left","margin-right":"20px"}},[n("table",{staticStyle:{"border-collapse":"collapse",border:"1px solid #333"}},e._l(e.board,(function(t,a){return n("tr",{key:"row"+a},e._l(t,(function(t,a){return n("td",{key:"cell$"+a,staticStyle:{border:"1px dotted #333",width:"50px",height:"50px","text-align":"center","vertical-align":"middle"}},[t.content===e.BOARD.WALL?n("div",{staticStyle:{width:"100%",height:"100%",background:"black"}}):e._e(),t.content===e.BOARD.BOMB?n("div",{staticStyle:{"line-height":"0"}},[n("font-awesome-icon",{attrs:{icon:"bomb",size:"2x"}}),n("span",{staticStyle:{"font-weight":"bold",color:"white",position:"absolute","margin-left":"-23px","margin-top":"20px"}},[e._v(e._s(t.rest))])],1):t.content===e.BOARD.PLAYER1?n("div",{staticStyle:{"line-height":"0"}},[n("font-awesome-icon",{staticStyle:{color:"blue"},attrs:{icon:"male",size:"2x"}})],1):t.content===e.BOARD.BLOCK_PLAYER1?n("div",{staticStyle:{"line-height":"0"}},[n("div",{staticClass:"spinner"},[n("div",{staticClass:"double-bounce"}),n("font-awesome-icon",{staticStyle:{color:"blue","margin-top":"4px","margin-left":"4px"},attrs:{icon:"male",size:"2x"}})],1)]):t.content===e.BOARD.BOMB_ON_PLAYER1?n("div",{staticStyle:{"line-height":"0"}},[n("font-awesome-icon",{staticStyle:{color:"blue"},attrs:{icon:"male",size:"2x"}}),n("font-awesome-icon",{staticStyle:{position:"absolute","margin-left":"-20px","z-index":"-1"},attrs:{icon:"bomb",size:"2x"}})],1):t.content===e.BOARD.BLOCK_BOMB_ON_PLAYER1?n("div",{staticStyle:{"line-height":"0"}},[n("div",{staticClass:"spinner"},[n("div",{staticClass:"double-bounce"}),n("font-awesome-icon",{staticStyle:{color:"blue","margin-top":"4px","margin-left":"4px"},attrs:{icon:"male",size:"2x"}}),n("font-awesome-icon",{staticStyle:{position:"absolute","margin-left":"-20px","z-index":"-1"},attrs:{icon:"bomb",size:"2x"}})],1)]):t.content===e.BOARD.PLAYER2?n("div",{staticStyle:{"line-height":"0"}},[n("font-awesome-icon",{staticStyle:{color:"red"},attrs:{icon:"male",size:"2x"}})],1):t.content===e.BOARD.BLOCK_PLAYER2?n("div",{staticStyle:{"line-height":"0"}},[n("div",{staticClass:"spinner"},[n("div",{staticClass:"double-bounce"}),n("font-awesome-icon",{staticStyle:{color:"red","margin-top":"4px","margin-left":"4px"},attrs:{icon:"male",size:"2x"}})],1)]):t.content===e.BOARD.BOMB_ON_PLAYER2?n("div",{staticStyle:{"line-height":"0"}},[n("font-awesome-icon",{staticStyle:{color:"red"},attrs:{icon:"male",size:"2x"}}),n("font-awesome-icon",{staticStyle:{position:"absolute","margin-left":"-20px","z-index":"-1"},attrs:{icon:"bomb",size:"2x"}})],1):t.content===e.BOARD.BLOCK_BOMB_ON_PLAYER2?n("div",{staticStyle:{"line-height":"0"}},[n("div",{staticClass:"spinner"},[n("div",{staticClass:"double-bounce"}),n("font-awesome-icon",{staticStyle:{color:"red","margin-top":"4px","margin-left":"4px"},attrs:{icon:"male",size:"2x"}}),n("font-awesome-icon",{staticStyle:{position:"absolute","margin-left":"-20px","z-index":"-1"},attrs:{icon:"bomb",size:"2x"}})],1)]):t.content===e.BOARD.EXPLOSION?n("div",[n("svg",{staticClass:"likeButton",attrs:{width:"32px",height:"32px",viewBox:"0 0 500 500"}},[n("circle",{staticClass:"explosion",attrs:{r:"150",cx:"250",cy:"250"}}),n("g",{staticClass:"particleLayer"},[n("circle",{attrs:{fill:"#8CE8C3",cx:"130",cy:"126.5",r:"12.5"}}),n("circle",{attrs:{fill:"#8CE8C3",cx:"411",cy:"313.5",r:"12.5"}}),n("circle",{attrs:{fill:"#91D2FA",cx:"279",cy:"86.5",r:"12.5"}}),n("circle",{attrs:{fill:"#91D2FA",cx:"155",cy:"390.5",r:"12.5"}}),n("circle",{attrs:{fill:"#CC8EF5",cx:"89",cy:"292.5",r:"10.5"}}),n("circle",{attrs:{fill:"#9BDFBA",cx:"414",cy:"282.5",r:"10.5"}}),n("circle",{attrs:{fill:"#9BDFBA",cx:"115",cy:"149.5",r:"10.5"}}),n("circle",{attrs:{fill:"#9FC7FA",cx:"250",cy:"80.5",r:"10.5"}}),n("circle",{attrs:{fill:"#9FC7FA",cx:"78",cy:"261.5",r:"10.5"}}),n("circle",{attrs:{fill:"#96D8E9",cx:"182",cy:"402.5",r:"10.5"}}),n("circle",{attrs:{fill:"#CC8EF5",cx:"401.5",cy:"166",r:"13"}}),n("circle",{attrs:{fill:"#DB92D0",cx:"379",cy:"141.5",r:"10.5"}}),n("circle",{attrs:{fill:"#DB92D0",cx:"327",cy:"397.5",r:"10.5"}}),n("circle",{attrs:{fill:"#DD99B8",cx:"296",cy:"392.5",r:"10.5"}})])])]):t.content===e.BOARD.BLAST?n("div",{staticClass:"blinking",staticStyle:{width:"100%",height:"100%"}}):e._e()])})),0)})),0)])},ie=[],ce=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments)),e.clicked=!1,e}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"BOARD",get:function(){return Ie}}]),t}(U["c"]);k["__decorate"]([Object(U["b"])()],ce.prototype,"board",void 0),ce=k["__decorate"]([U["a"]],ce);var se=ce,le=se,de=(n("0a97"),Object(s["a"])(le,oe,ie,!1,null,"724bd544",null)),ue=de.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative",bottom:"120px",left:"120px"}},[n("table",{staticStyle:{"table-layout":"fixed"}},[n("tr",[n("td"),n("td",[n("b-button",{attrs:{disabled:e.disabledUp},on:{click:e.onUpClick}},[n("font-awesome-icon",{attrs:{icon:"arrow-up",size:"2x"}})],1)],1),n("td",[n("b-button",{attrs:{disabled:e.disabledBomb},on:{click:e.onBombClick}},[n("font-awesome-icon",{attrs:{icon:"bomb",size:"2x"}})],1)],1)]),n("tr",[n("td",[n("b-button",{attrs:{disabled:e.disabledLeft},on:{click:e.onLeftClick}},[n("font-awesome-icon",{attrs:{icon:"arrow-left",size:"2x"}})],1)],1),n("td",[n("b-button",{attrs:{disabled:e.disabledEnd},on:{click:e.onEndClick}},[n("font-awesome-icon",{attrs:{icon:"check-square",size:"2x"}})],1)],1),n("td",[n("b-button",{attrs:{disabled:e.disabledRight},on:{click:e.onRightClick}},[n("font-awesome-icon",{attrs:{icon:"arrow-right",size:"2x"}})],1)],1)]),n("tr",[n("td"),n("td",[n("b-button",{attrs:{disabled:e.disabledDown},on:{click:e.onDownClick}},[n("font-awesome-icon",{attrs:{icon:"arrow-down",size:"2x"}})],1)],1),n("td",[n("b-button",{attrs:{disabled:e.disabledRedo},on:{click:e.onRedoClick}},[n("font-awesome-icon",{attrs:{icon:"redo",size:"2x"}})],1)],1)])])])},be=[],pe=function(e){function t(){return Object(w["a"])(this,t),Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments))}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"onUpClick",value:function(){this.$emit("click",ze.UP)}},{key:"onLeftClick",value:function(){this.$emit("click",ze.LEFT)}},{key:"onRightClick",value:function(){this.$emit("click",ze.RIGHT)}},{key:"onDownClick",value:function(){this.$emit("click",ze.DOWN)}},{key:"onRedoClick",value:function(){this.$emit("click",ze.REDO)}},{key:"onBombClick",value:function(){this.$emit("click",ze.BOMB)}},{key:"onEndClick",value:function(){this.$emit("click",ze.END)}}]),t}(U["c"]);k["__decorate"]([Object(U["b"])()],pe.prototype,"disabledUp",void 0),k["__decorate"]([Object(U["b"])()],pe.prototype,"disabledLeft",void 0),k["__decorate"]([Object(U["b"])()],pe.prototype,"disabledRight",void 0),k["__decorate"]([Object(U["b"])()],pe.prototype,"disabledDown",void 0),k["__decorate"]([Object(U["b"])()],pe.prototype,"disabledRedo",void 0),k["__decorate"]([Object(U["b"])()],pe.prototype,"disabledBomb",void 0),k["__decorate"]([Object(U["b"])()],pe.prototype,"disabledEnd",void 0),pe=k["__decorate"]([U["a"]],pe);var he=pe,fe=he,ye=Object(s["a"])(fe,me,be,!1,null,"4075fab7",null),ve=ye.exports,Oe=n("6fc5"),ge=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments)),e.uid="",e}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"getUID",value:function(){return this.uid}},{key:"setUID",value:function(e){this.uid=e}}]),t}(Oe["c"]);k["__decorate"]([Oe["b"]],ge.prototype,"getUID",null),k["__decorate"]([Oe["b"]],ge.prototype,"setUID",null),ge=k["__decorate"]([Object(Oe["a"])({dynamic:!0,store:m,name:"user",namespaced:!0})],ge);var _e=Object(Oe["d"])(ge),we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"logs"}},[n("b-form-textarea",{attrs:{plaintext:"",value:e.logs.join("\n"),rows:"3"}})],1)},xe=[],Me=function(e){function t(){return Object(w["a"])(this,t),Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments))}return Object(N["a"])(t,e),t}(U["c"]);k["__decorate"]([Object(U["b"])()],Me.prototype,"logs",void 0),Me=k["__decorate"]([U["a"]],Me);var Re=Me,Ne=Re,Pe=Object(s["a"])(Ne,we,xe,!1,null,null,null),Ee=Pe.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-right":"20px"}},e._l(e.command,(function(t,a){return n("div",{key:a,class:[e.MOVE.RANDOM_UP,e.MOVE.RANDOM_LEFT,e.MOVE.RANDOM_RIGHT,e.MOVE.RANDOM_DOWN].includes(t)?"triangle":"frame_stroke_rect",staticStyle:{float:"left"}},[t===e.MOVE.UP||t===e.MOVE.RANDOM_UP?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-up"}}):t===e.MOVE.LEFT||t===e.MOVE.RANDOM_LEFT?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-left"}}):t===e.MOVE.RIGHT||t===e.MOVE.RANDOM_RIGHT?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-right"}}):t===e.MOVE.DOWN||t===e.MOVE.RANDOM_DOWN?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-down"}}):t===e.MOVE.BOMB?n("font-awesome-icon",{attrs:{icon:"bomb"}}):t===e.MOVE.NULL&&e.unknownMode?n("font-awesome-icon",{attrs:{icon:"question-circle"}}):e._e()],1)})),0)},ke=[],De=function(e){function t(){return Object(w["a"])(this,t),Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments))}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"MOVE",get:function(){return ze}}]),t}(U["c"]);k["__decorate"]([Object(U["b"])()],De.prototype,"command",void 0),De=k["__decorate"]([U["a"]],De);var Ae=De,Be=Ae,je=(n("4b0e"),Object(s["a"])(Be,Le,ke,!1,null,"9305deaa",null)),Te=je.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-right":"20px"}},e._l(e.command,(function(t,a){return n("div",{key:a,class:[e.MOVE.RANDOM_UP,e.MOVE.RANDOM_LEFT,e.MOVE.RANDOM_RIGHT,e.MOVE.RANDOM_DOWN].includes(t)?"triangle":"frame_stroke_rect",staticStyle:{float:"right"}},[t===e.MOVE.UP||t===e.MOVE.RANDOM_UP?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-up"}}):t===e.MOVE.LEFT||t===e.MOVE.RANDOM_LEFT?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-left"}}):t===e.MOVE.RIGHT||t===e.MOVE.RANDOM_RIGHT?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-right"}}):t===e.MOVE.DOWN||t===e.MOVE.RANDOM_DOWN?n("font-awesome-icon",{attrs:{icon:"arrow-alt-circle-down"}}):t===e.MOVE.BOMB?n("font-awesome-icon",{attrs:{icon:"bomb"}}):t===e.MOVE.NULL&&e.unknownMode?n("font-awesome-icon",{attrs:{icon:"question-circle"}}):e._e()],1)})),0)},Ue=[],Ce=function(e){function t(){return Object(w["a"])(this,t),Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments))}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"MOVE",get:function(){return ze}}]),t}(U["c"]);k["__decorate"]([Object(U["b"])()],Ce.prototype,"command",void 0),Ce=k["__decorate"]([U["a"]],Ce);var Ie,ze,$e,We=Ce,Ve=We,Fe=(n("e2fe"),Object(s["a"])(Ve,Se,Ue,!1,null,"7e043d97",null)),Ye=Fe.exports,Ge=5,He=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function Je(e){return e.map((function(e){switch(e){case"UP":return ze.UP;case"LEFT":return ze.LEFT;case"RIGHT":return ze.RIGHT;case"DOWN":return ze.DOWN;case"RANDOM_UP":return ze.RANDOM_UP;case"RANDOM_LEFT":return ze.RANDOM_LEFT;case"RANDOM_RIGHT":return ze.RANDOM_RIGHT;case"RANDOM_DOWN":return ze.RANDOM_DOWN;case"BOMB":return ze.BOMB;default:return ze.NULL}}))}function qe(e){return e.map((function(e){switch(e){case ze.UP:return"UP";case ze.LEFT:return"LEFT";case ze.RIGHT:return"RIGHT";case ze.DOWN:return"DOWN";case ze.RANDOM_UP:return"RANDOM_UP";case ze.RANDOM_LEFT:return"RANDOM_LEFT";case ze.RANDOM_RIGHT:return"RANDOM_RIGHT";case ze.RANDOM_DOWN:return"RANDOM_DOWN";case ze.BOMB:return"BOMB";default:return"NULL"}}))}function Xe(e){return e.map((function(e){return e.map((function(e){return{rest:0,content:e}}))}))}(function(e){e[e["NONE"]=0]="NONE",e[e["WALL"]=1]="WALL",e[e["PLAYER1"]=2]="PLAYER1",e[e["PLAYER2"]=3]="PLAYER2",e[e["BOMB"]=4]="BOMB",e[e["BOMB_ON_PLAYER1"]=5]="BOMB_ON_PLAYER1",e[e["BOMB_ON_PLAYER2"]=6]="BOMB_ON_PLAYER2",e[e["EXPLOSION"]=7]="EXPLOSION",e[e["BLAST"]=8]="BLAST"})(Ie||(Ie={})),function(e){e[e["NULL"]=0]="NULL",e[e["UP"]=1]="UP",e[e["LEFT"]=2]="LEFT",e[e["RIGHT"]=3]="RIGHT",e[e["DOWN"]=4]="DOWN",e[e["BOMB"]=5]="BOMB",e[e["REDO"]=6]="REDO",e[e["END"]=7]="END",e[e["RANDOM_LEFT"]=8]="RANDOM_LEFT",e[e["RANDOM_RIGHT"]=9]="RANDOM_RIGHT",e[e["RANDOM_UP"]=10]="RANDOM_UP",e[e["RANDOM_DOWN"]=11]="RANDOM_DOWN"}(ze||(ze={})),function(e){e[e["P1_WIN"]=0]="P1_WIN",e[e["P2_WIN"]=1]="P2_WIN",e[e["DRAW"]=2]="DRAW",e[e["CONTINUE"]=3]="CONTINUE"}($e||($e={}));var Ke=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments)),e.board=Xe(A),e.disabledUp=!0,e.disabledLeft=!0,e.disabledRight=!0,e.disabledDown=!0,e.disabledBomb=!0,e.disabledRedo=!0,e.disabledEnd=!0,e.player1command=new Array(Ge).fill(ze.NULL),e.prePlayer1command=new Array(Ge).fill(ze.NULL),e.executePlayer1command=new Array(Ge).fill(ze.NULL),e.player2command=new Array(Ge).fill(ze.NULL),e.prePlayer2command=new Array(Ge).fill(ze.NULL),e.executePlayer2command=new Array(Ge).fill(ze.NULL),e.player1bomb=-1,e.player2bomb=-1,e.logs=[],e.room=S.database().ref(),e.isPlayer1=!0,e.playing=!1,e.elapsedTime=0,e.judge=$e.CONTINUE,e.unknownMode=!1,e.waitTime=10,e.zigzag=!1,e}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"makeRangeIterator",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(L["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:o=t;case 1:if(!(o<n)){r.next=10;break}return e.elapsedTime++,r.next=5,Object(E["a"])(He(1e3));case 5:return r.next=7,o;case 7:o+=a,r.next=1;break;case 10:case"end":return r.stop()}}),r)})))()}},{key:"redoRoom",value:function(){var e,t,n,a=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return this.isPlayer1&&this.room.child("end").set(!0),e=function(){if(a.isPlayer1){if(a.judge===$e.P1_WIN)return"WIN";if(a.judge===$e.P2_WIN)return"LOSE"}else{if(a.judge===$e.P1_WIN)return"LOSE";if(a.judge===$e.P2_WIN)return"WIN"}return a.judge===$e.DRAW?"DRAW":"EXCEPTION"}(),t=S.database().ref(_e.uid),r.t0=Number,r.next=6,regeneratorRuntime.awrap(t.child(e).once("value"));case 6:r.t1=r.sent.val(),n=(0,r.t0)(r.t1),t.child(e).set(n+1),this.$router.push("/room");case 10:case"end":return r.stop()}}),null,this)}},{key:"player1commandChanged",value:function(){if(this.isPlayer1){var e=this.room.child("player1");e.child("bomb").set(this.player1bomb),e.child("commands").child("now").set(qe(this.player1command))}}},{key:"player2commandChanged",value:function(){if(!this.isPlayer1){var e=this.room.child("player2");e.child("bomb").set(this.player2bomb),e.child("commands").child("now").set(qe(this.player2command))}}},{key:"elapsedTimeChanged",value:function(){this.isPlayer1&&this.room.child("elapsedTime").set(this.elapsedTime)}},{key:"start",value:function(){var e,t,n,a,r,o,i,c,s=this;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:if(this.room){l.next=4;break}return alert("ルーム情報を失いました。ルーム選択画面に戻ります。"),this.$router.push("/room"),l.abrupt("return");case 4:return this.setDisabledMove(),e="player".concat(this.isPlayer1?2:1),this.room.child(e).child("bomb").on("value",(function(e){s.isPlayer1?s.player2bomb=e.val():s.player1bomb=e.val()})),l.t0=Number,l.next=10,regeneratorRuntime.awrap(this.room.child("waitTime").once("value"));case 10:return l.t1=l.sent.val(),this.waitTime=this.player2bomb=(0,l.t0)(l.t1),l.t2=Number,l.next=15,regeneratorRuntime.awrap(this.room.child("initBomb").once("value"));case 15:return l.t3=l.sent.val(),this.player1bomb=this.player2bomb=(0,l.t2)(l.t3),l.next=19,regeneratorRuntime.awrap(this.room.child("visibleMode").once("value"));case 19:return t=l.sent.val(),this.unknownMode=this.isPlayer1?[2,3].includes(t):[1,3].includes(t),l.next=23,regeneratorRuntime.awrap(this.room.child("zigzag").once("value"));case 23:if(this.zigzag=l.sent.val(),this.room.child(e).child("commands").child("now").on("value",(function(e){s.isPlayer1?s.player2command=Je(e.val()):s.player1command=Je(e.val())})),!this.isPlayer1){l.next=61;break}n=!0,a=!1,l.prev=28,o=Object(P["a"])(this.makeRangeIterator());case 30:return l.next=32,regeneratorRuntime.awrap(o.next());case 32:return i=l.sent,n=i.done,l.next=36,regeneratorRuntime.awrap(i.value);case 36:if(c=l.sent,n){l.next=43;break}c,this.elapsedTime%(this.waitTime+1)===0&&this.elapsedTime>0&&function(){var e=[];if(s.board.forEach((function(t,n){return t.forEach((function(t,a){switch(t.content){case Ie.BOMB:s.$set(s.board[n][a],"rest",s.board[n][a].rest-1),e.push({x:a,y:n})}}))})),s.elapsedTime>s.waitTime){var t=Math.ceil(s.elapsedTime/(s.waitTime+1));s.elapsedTime>2*s.waitTime&&(s.executePlayer1command=s.prePlayer1command.concat(),s.executePlayer2command=s.prePlayer2command.concat(),t%2!==0&&s.zigzag?s.move(!1,s.executePlayer2command).then((function(){return s.move(!0,s.executePlayer1command)})).then((function(){return s.explosion()})).then((function(e){s.clearBoard(e),s.gameJudge()})):s.move(!0,s.executePlayer1command).then((function(){return s.move(!1,s.executePlayer2command)})).then((function(){return s.explosion()})).then((function(e){s.clearBoard(e),s.gameJudge()}))),s.prePlayer1command=s.player1command.map((function(e){return e===ze.NULL?s.randomCommand():e})),s.player1command=Array(Ge).fill(ze.NULL),s.prePlayer2command=s.player2command.map((function(e){return e===ze.NULL?s.randomCommand():e})),s.player2command=Array(Ge).fill(ze.NULL);var n=qe(s.prePlayer1command),a=qe(s.prePlayer2command);s.room.child("player1").child("commands").child("previous").set(n),s.room.child("player2").child("commands").child("previous").set(a),s.room.child("player2").child("commands").child("now").set(qe(s.player1command)),s.room.child("player2").child("commands").child("now").set(qe(s.player2command)),s.unknownMode||(s.logs.unshift("プレイヤー2:".concat(a.map((function(e){return e.split("_").map((function(e){return e[0]})).join("_")})).join("/"))),s.logs.unshift("プレイヤー1:".concat(n.map((function(e){return e.split("_").map((function(e){return e[0]})).join("_")})).join("/")))),s.logs.unshift("ターン".concat(t," コマンド設定")),s.room.child("logs").set(s.logs)}s.elapsedTime%(s.waitTime+1)===0&&s.elapsedTime>0&&s.setDisabledMove()}();case 40:n=!0,l.next=30;break;case 43:l.next=49;break;case 45:l.prev=45,l.t4=l["catch"](28),a=!0,r=l.t4;case 49:if(l.prev=49,l.prev=50,n||null==o.return){l.next=54;break}return l.next=54,regeneratorRuntime.awrap(o.return());case 54:if(l.prev=54,!a){l.next=57;break}throw r;case 57:return l.finish(54);case 58:return l.finish(49);case 59:l.next=67;break;case 61:this.room.child("board").on("value",(function(e){s.board=e.val()})),this.room.child("player1").child("commands").child("previous").on("value",(function(e){s.prePlayer1command=Je(e.val())})),this.room.child("player2").child("commands").child("previous").on("value",(function(e){s.prePlayer2command=Je(e.val())})),this.room.child("player2").child("commands").child("now").on("value",(function(e){s.player2command=Je(e.val()),s.setDisabledMove()})),this.room.child("logs").on("value",(function(e){s.logs=e.val()})),this.room.child("elapsedTime").on("value",(function(e){var t,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:s.elapsedTime=Number(e.val()),s.elapsedTime%(s.waitTime+1)===0&&s.elapsedTime>0&&(t=[],s.board.forEach((function(e,n){return e.forEach((function(e,a){switch(e.content){case Ie.BOMB:s.$set(s.board[n][a],"rest",s.board[n][a].rest-1),t.push({x:a,y:n})}}))})),n=Math.ceil(s.elapsedTime/(s.waitTime+1)),s.elapsedTime>2*s.waitTime&&(s.executePlayer1command=s.prePlayer1command.concat(),s.executePlayer2command=s.prePlayer2command.concat(),n%2!==0&&s.zigzag?s.move(!1,s.executePlayer2command).then((function(){return s.move(!0,s.executePlayer1command)})).then((function(){return s.explosion()})).then((function(e){s.clearBoard(e),s.gameJudge()})):s.move(!0,s.executePlayer1command).then((function(){return s.move(!1,s.executePlayer2command)})).then((function(){return s.explosion()})).then((function(e){s.clearBoard(e),s.gameJudge()}))),s.setDisabledMove());case 2:case"end":return a.stop()}}))}));case 67:case"end":return l.stop()}}),null,this,[[28,45,49,59],[50,,54,58]])}},{key:"gameJudge",value:function(){var e=this.board.some((function(e){return e.some((function(e){var t=e.content;return[Ie.PLAYER1,Ie.BOMB_ON_PLAYER1].includes(t)}))})),t=this.board.some((function(e){return e.some((function(e){var t=e.content;return[Ie.PLAYER2,Ie.BOMB_ON_PLAYER2].includes(t)}))})),n=this.board.some((function(e,t){return e.some((function(e,t){switch(e.content){case Ie.BOMB:case Ie.BOMB_ON_PLAYER1:case Ie.BOMB_ON_PLAYER2:return!0}return!1}))}))||this.player1bomb>0||this.player2bomb>0;return!e&&!t||e&&t&&!n?(this.judge=$e.DRAW,this.$bvModal.show("resultModal"),!0):t?!e&&(this.judge=$e.P2_WIN,this.$bvModal.show("resultModal"),!0):(this.judge=$e.P1_WIN,this.$bvModal.show("resultModal"),!0)}},{key:"clearBoard",value:function(e){var t=this;e?e.forEach((function(e){t.$set(t.board[e.y],e.x,{content:Ie.NONE,rest:0})})):this.board.forEach((function(e,n){return e.forEach((function(e,a){[Ie.BLAST,Ie.EXPLOSION].includes(e.content)&&t.$set(t.board[n],a,{content:Ie.NONE,rest:0})}))}))}},{key:"explosion",value:function(){var e,t=this,n=arguments;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e=[],this.board.forEach((function(n,a){n.forEach((function(n,r){if(n.content===Ie.BOMB&&0===n.rest){var o=[Ie.WALL];r>0&&a>0&&!o.includes(t.board[a-1][r-1].content)&&(t.$set(t.board[a-1],r-1,{content:Ie.BLAST,rest:0}),e.push({x:r-1,y:a-1})),r>0&&!o.includes(t.board[a][r-1].content)&&(t.$set(t.board[a],r-1,{content:Ie.BLAST,rest:0}),e.push({x:r-1,y:a})),r>0&&a<t.board[0].length-1&&!o.includes(t.board[a+1][r-1].content)&&(t.$set(t.board[a+1],r-1,{content:Ie.BLAST,rest:0}),e.push({x:r-1,y:a+1})),a>0&&!o.includes(t.board[a-1][r].content)&&(t.$set(t.board[a-1],r,{content:Ie.BLAST,rest:0}),e.push({x:r,y:a-1})),a<t.board[0].length-1&&!o.includes(t.board[a+1][r].content)&&(t.$set(t.board[a+1],r,{content:Ie.BLAST,rest:0}),e.push({x:r,y:a+1})),r<t.board.length-1&&a>0&&!o.includes(t.board[a-1][r+1].content)&&(t.$set(t.board[a-1],r+1,{content:Ie.BLAST,rest:0}),e.push({x:r+1,y:a-1})),r<t.board.length-1&&!o.includes(t.board[a][r+1].content)&&(t.$set(t.board[a],r+1,{content:Ie.BLAST,rest:0}),e.push({x:r+1,y:a})),r<t.board.length-1&&a<t.board[0].length-1&&!o.includes(t.board[a+1][r+1].content)&&(t.$set(t.board[a+1],r+1,{content:Ie.BLAST,rest:0}),e.push({x:r+1,y:a+1})),t.$set(t.board[a],r,{content:Ie.EXPLOSION,rest:0}),e.push({x:r,y:a})}}))})),a.next=5,regeneratorRuntime.awrap(He(1e3).then((function(){return e})));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),null,this)}},{key:"created",value:function(){var e,t,n,a,r,o=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return""===_e.uid&&(alert("ユーザー情報を失いました。ルーム選択画面に戻ります。"),this.$router.push("/room")),i.next=3,regeneratorRuntime.awrap(S.database().ref("user").child(_e.uid).child("roomID").once("value"));case 3:return e=i.sent.val(),this.room=S.database().ref("room").child(String(e)),i.next=7,regeneratorRuntime.awrap(this.room.child("playing").once("value"));case 7:return t=i.sent.val(),i.next=10,regeneratorRuntime.awrap(this.room.child("end").once("value"));case 10:return n=i.sent.val(),n&&(alert("既にゲームが終了しています。ルーム選択画面に戻ります。"),this.$router.push("/room")),t&&(S.database().ref("user").child(_e.uid).child("roomID").set(0),alert("既にゲームが行われています。ルーム選択画面に戻ります。"),this.$router.push("/room")),i.next=15,regeneratorRuntime.awrap(this.room.child("player1").child("uid").once("value"));case 15:if(a=i.sent.val(),_e.uid!==a){i.next=20;break}this.isPlayer1=!0,i.next=24;break;case 20:return i.next=22,regeneratorRuntime.awrap(this.room.child("player2").child("uid").once("value"));case 22:r=i.sent.val(),_e.uid===r?(this.isPlayer1=!1,this.room.child("playing").set(!0)):(S.database().ref("user").child(_e.uid).child("roomID").set(0),alert("エラーが発生しました。ルーム選択画面に戻ります。"),this.$router.push("/room"));case 24:this.$set(this.board[0],0,{content:Ie.PLAYER1,rest:0}),this.$set(this.board[this.board.length-1],this.board[this.board.length-1].length-1,{content:Ie.PLAYER2,rest:0}),this.room.child("board").set(this.board),this.room.child("playing").on("value",(function(e){e.val()&&(o.playing=!0,o.start())}));case 28:case"end":return i.stop()}}),null,this)}},{key:"getPlayerIndex",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={x:-1,y:-1},n=e?[Ie.PLAYER1,Ie.BOMB_ON_PLAYER1]:[Ie.PLAYER2,Ie.BOMB_ON_PLAYER2];return this.board.some((function(e,a){return e.some((function(e,r){return!!n.includes(e.content)&&(t={x:r,y:a},!0)}))})),t}},{key:"setDisabledMove",value:function(){var e=this.isPlayer1?this.player1command:this.player2command,t=this.isPlayer1?this.player1bomb:this.player2bomb;this.disabledUp=this.disabledLeft=this.disabledRight=this.disabledDown=e.filter((function(e){return e!==ze.NULL})).length===Ge,this.disabledBomb=t<=0||e.filter((function(e){return e!==ze.NULL})).length===Ge,this.disabledRedo=0===e.filter((function(e){return e!==ze.NULL})).length}},{key:"setCommand",value:function(e){if([ze.UP,ze.LEFT,ze.RIGHT,ze.DOWN,ze.BOMB].includes(e)&&(this.isPlayer1?this.player1command.filter((function(e){return e!==ze.NULL})).length<Ge&&(this.$set(this.player1command,this.player1command.filter((function(e){return e!==ze.NULL})).length,e),e===ze.BOMB&&this.player1bomb--):this.player2command.filter((function(e){return e!==ze.NULL})).length<Ge&&(this.$set(this.player2command,this.player2command.filter((function(e){return e!==ze.NULL})).length,e),e===ze.BOMB&&this.player2bomb--)),e===ze.REDO)if(this.isPlayer1){if(this.player1command.filter((function(e){return e!==ze.NULL})).length>0){var t=this.player1command[this.player1command.filter((function(e){return e!==ze.NULL})).length-1];this.$set(this.player1command,this.player1command.filter((function(e){return e!==ze.NULL})).length-1,ze.NULL),t===ze.BOMB&&this.player1bomb++}}else if(this.player2command.filter((function(e){return e!==ze.NULL})).length>0){var n=this.player2command[this.player2command.filter((function(e){return e!==ze.NULL})).length-1];this.$set(this.player2command,this.player2command.filter((function(e){return e!==ze.NULL})).length-1,ze.NULL),n===ze.BOMB&&this.player2bomb++}this.setDisabledMove()}},{key:"randomCommand",value:function(){var e=[ze.RANDOM_UP,ze.RANDOM_LEFT,ze.RANDOM_RIGHT,ze.RANDOM_DOWN];return e[Math.floor(Math.random()*e.length)]}},{key:"move",value:function(e,t){var n,a,r,o,i,c,s,l,d;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:n=[Ie.PLAYER1,Ie.PLAYER2,Ie.WALL,Ie.BOMB,Ie.BOMB_ON_PLAYER1,Ie.BOMB_ON_PLAYER2],a=e?Ie.PLAYER1:Ie.PLAYER2,r=e?Ie.BOMB_ON_PLAYER1:Ie.BOMB_ON_PLAYER2,o=0;case 4:if(!(o<t.length)){u.next=32;break}return u.next=7,regeneratorRuntime.awrap(He(500));case 7:if(i=t.shift()||ze.NULL,t.push(ze.NULL),c=this.getPlayerIndex(e),s=c.x,l=c.y,![ze.UP,ze.LEFT,ze.RIGHT,ze.DOWN,ze.BOMB,ze.RANDOM_UP,ze.RANDOM_LEFT,ze.RANDOM_RIGHT,ze.RANDOM_DOWN].includes(i)){u.next=29;break}if(i!==ze.BOMB){u.next=15;break}this.$set(this.board[l],s,{content:r,rest:0}),u.next=29;break;case 15:d=!1,u.t0=i,u.next=u.t0===ze.UP?19:u.t0===ze.RANDOM_UP?19:u.t0===ze.LEFT?21:u.t0===ze.RANDOM_LEFT?21:u.t0===ze.RIGHT?23:u.t0===ze.RANDOM_RIGHT?23:u.t0===ze.DOWN?25:u.t0===ze.RANDOM_DOWN?25:27;break;case 19:return l>0&&!n.includes(this.board[l-1][s].content)&&(this.$set(this.board[l-1],s,{content:a,rest:0}),d=!0),u.abrupt("break",28);case 21:return s>0&&!n.includes(this.board[l][s-1].content)&&(this.$set(this.board[l],s-1,{content:a,rest:0}),d=!0),u.abrupt("break",28);case 23:return s<this.board[l].length-1&&!n.includes(this.board[l][s+1].content)&&(this.$set(this.board[l],s+1,{content:a,rest:0}),d=!0),u.abrupt("break",28);case 25:return l<this.board.length-1&&!n.includes(this.board[l+1][s].content)&&(this.$set(this.board[l+1],s,{content:a,rest:0}),d=!0),u.abrupt("break",28);case 27:return u.abrupt("break",28);case 28:d&&(this.board[l][s].content===r?this.$set(this.board[l],s,{content:Ie.BOMB,rest:3}):this.$set(this.board[l],s,{content:Ie.NONE,rest:0}));case 29:o++,u.next=4;break;case 32:case"end":return u.stop()}}),null,this)}},{key:"JUDGE",get:function(){return $e}},{key:"refs",get:function(){return this.$refs}}]),t}(U["c"]);k["__decorate"]([Object(U["d"])("player1command")],Ke.prototype,"player1commandChanged",null),k["__decorate"]([Object(U["d"])("player2command")],Ke.prototype,"player2commandChanged",null),k["__decorate"]([Object(U["d"])("elapsedTime")],Ke.prototype,"elapsedTimeChanged",null),Ke=k["__decorate"]([Object(U["a"])({components:{Command:re,Board:ue,Controller:ve,Logs:Ee,P1ExecuteCommand:Te,P2ExecuteCommand:Ye}})],Ke);var Qe=Ke,Ze=Qe,et=(n("68e4"),Object(s["a"])(Ze,g,_,!1,null,null,null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"signIn"},[n("h2",[e._v("Sign in")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signIn(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signIn(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("b-button",{on:{click:e.signIn}},[e._v("Signin")]),e.loading?n("b-spinner",{staticStyle:{"margin-top":"10px"},attrs:{label:"Spinning"}}):e._e(),n("p",[e._v(" You don't have an account? "),n("router-link",{attrs:{to:"/signup"}},[e._v("create account now!!")])],1)],1)},at=[],rt=n("d523"),ot=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments)),e.items=[],e.username="",e.password="",e.loading=!1,e}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"signIn",value:function(){var e=this;this.loading=!0,S.auth().signInWithEmailAndPassword(this.username,this.password).then((function(t){alert("ログインしました。"),e.$router.push("/room")})).catch((function(e){alert(e.message)})).finally((function(){e.loading=!1}))}}]),t}(U["c"]);ot=k["__decorate"]([Object(U["a"])({components:{VueLoading:rt["VueLoading"]}})],ot);var it=ot,ct=it,st=(n("dfb8"),Object(s["a"])(ct,nt,at,!1,null,"04918b14",null)),lt=st.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"signUp"},[n("h2",[e._v("Sign up")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signUp(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signUp(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("b-button",{on:{click:e.signUp}},[e._v("Register")]),e.loading?n("b-spinner",{staticStyle:{"margin-top":"10px"},attrs:{label:"Spinning"}}):e._e(),n("p",[e._v(" Do you have an account? "),n("router-link",{attrs:{to:"/signin"}},[e._v("sign in now!!")])],1)],1)},ut=[],mt=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments)),e.items=[],e.username="",e.password="",e.loading=!1,e}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"signUp",value:function(){var e=this;this.loading=!0,S.auth().createUserWithEmailAndPassword(this.username,this.password).then((function(t){alert("アカウントが作成されました。"),e.$router.push("/room")})).catch((function(e){alert(e.message)})).finally((function(){e.loading=!1}))}}]),t}(U["c"]);mt=k["__decorate"]([Object(U["a"])({components:{VueLoading:rt["VueLoading"]}})],mt);var bt=mt,pt=bt,ht=(n("29dc"),Object(s["a"])(pt,dt,ut,!1,null,"7b1b19cc",null)),ft=ht.exports,yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"room"}},[n("div",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.createRoomModal",modifiers:{createRoomModal:!0}}],staticStyle:{"margin-bottom":"10px"}},[e._v("ルーム作成")]),n("span",{staticStyle:{"margin-left":"10px"}},[e._v("ユーザーID："+e._s(e.uid))]),n("b-modal",{attrs:{id:"createRoomModal",title:"ルーム作成"},on:{ok:e.genRoom}},[n("b-form-group",{staticStyle:{cursor:"pointer"},attrs:{label:"ゲームモード"}},[n("b-form-radio-group",{staticStyle:{"margin-bottom":"10px"},attrs:{options:[{item:0,name:"1P→2P表示/2P→1P表示"},{item:1,name:"1P→2P表示/2P→1P非表示"},{item:2,name:"1P→2P非表示/2P→1P表示"},{item:3,name:"1P→2P非表示/2P→1P非表示"}],"value-field":"item","text-field":"name",buttons:"","button-variant":"outline-primary",name:"radio-btn-outline"},model:{value:e.visibleMode,callback:function(t){e.visibleMode=t},expression:"visibleMode"}}),n("b-form-radio-group",{attrs:{options:[{item:!1,name:"行動順[1→2],[1→2],[1→2],..."},{item:!0,name:"行動順[1→2],[2→1],[1→2],..."}],"value-field":"item","text-field":"name",buttons:"","button-variant":"outline-primary",name:"radio-btn-outline"},model:{value:e.zigzag,callback:function(t){e.zigzag=t},expression:"zigzag"}})],1),e._v(" 行動間隔 "),n("b-form-input",{attrs:{type:"number"},model:{value:e.waitTime,callback:function(t){e.waitTime=t},expression:"waitTime"}}),e._v(" 爆弾数 "),n("b-form-input",{attrs:{type:"number"},model:{value:e.bomb,callback:function(t){e.bomb=t},expression:"bomb"}})],1)],1),n("div",[e._v("ルーム一覧")]),n("div",[n("b-table",{attrs:{striped:"",hover:"",items:e.rooms,fields:e.fields},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(n){return e.enterRoom(t.item.id)}}},[e._v(" 入室 ")]),n("b-modal",{attrs:{id:e.infoModal.id,title:e.infoModal.title,"ok-only":""},on:{hide:e.resetInfoModal}},[n("pre",[e._v(e._s(e.infoModal.content))])])]}}])})],1)])},vt=[],Ot=(n("07ac"),function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(M["a"])(this,Object(R["a"])(t).apply(this,arguments)),e.fields=[{key:"id",label:"ルームID"},{key:"visibleMode",label:"相手行動"},{key:"zigzag",label:"行動順序"},{key:"player1",label:"プレイヤー1ID"},{key:"actions",label:""}],e.rooms=[],e.visibleMode=0,e.zigzag=!1,e.bomb=10,e.waitTime=15,e.infoModal={id:"info-modal",title:"",content:""},e}return Object(N["a"])(t,e),Object(x["a"])(t,[{key:"enterRoom",value:function(e){S.database().ref("room").child(String(e)).child("player2").child("uid").set(_e.uid),S.database().ref("user").child(_e.uid).child("roomID").set(e),this.$router.push("/")}},{key:"resetInfoModal",value:function(){this.infoModal.title="",this.infoModal.content=""}},{key:"genRoom",value:function(){var e,t,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=S.database().ref("room"),a.t0=String,a.next=4,regeneratorRuntime.awrap(S.database().ref("roomCount").once("value"));case 4:a.t1=a.sent.val(),a.t2=0|a.t1,t=(0,a.t0)(a.t2),n={id:Number(t)+1,board:A,playing:!1,end:!1,player1:{uid:_e.uid,logs:[],commands:{previous:qe(new Array(Ge).fill(ze.NULL)),now:qe(new Array(Ge).fill(ze.NULL))},bomb:this.bomb},player2:{uid:null,logs:[],commands:{previous:qe(new Array(Ge).fill(ze.NULL)),now:qe(new Array(Ge).fill(ze.NULL))},bomb:this.bomb},turn:!0,initBomb:this.bomb,waitTime:this.waitTime,visibleMode:this.visibleMode,zigzag:this.zigzag},e.child(String(Number(t)+1)).set(n),S.database().ref("user").child(_e.uid).child("roomID").set(Number(t)+1),S.database().ref("roomCount").set(Number(t)+1),this.$router.push("/");case 12:case"end":return a.stop()}}),null,this)}},{key:"created",value:function(){var e,t,n,a,r,o=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e=S.auth().currentUser,e){i.next=4;break}return this.$router.push("/signin"),i.abrupt("return");case 4:return _e.setUID(e.uid),t=S.database().ref("user").child(_e.uid),n=S.database().ref("room"),i.next=9,regeneratorRuntime.awrap(t.once("value"));case 9:if(a=i.sent,a.exists()){i.next=17;break}t.child("win").set(0),t.child("lose").set(0),t.child("draw").set(0),t.child("roomID").set(0),i.next=26;break;case 17:if(r=a.child("roomID").val(),!(r>0)){i.next=26;break}return n.child(String(r)).child("end").set(!0),i.t0=t.child("lose"),i.next=23,regeneratorRuntime.awrap(t.child("lose").once("value"));case 23:i.t1=i.sent.val(),i.t2=i.t1+1,i.t0.set.call(i.t0,i.t2);case 26:return i.t3=String,i.next=29,regeneratorRuntime.awrap(S.database().ref("roomCount").once("value"));case 29:i.t4=i.sent.val(),(0,i.t3)(i.t4),n.on("value",(function(e){var t=e.val();t&&(o.rooms=Object.values(t).filter((function(e){return!e.playing&&!e.end&&e.player1&&e.player1.uid!==_e.uid})).map((function(e){var t=e.id,n=e.visibleMode,a=e.zigzag,r=e.player1;return{id:t,visibleMode:["1P→2P表示/2P→1P表示","1P→2P表示/2P→1P非表示","1P→2P非表示/2P→1P表示","1P→2P非表示/2P→1P非表示"][n],zigzag:a?"ジグザグ":"一定",player1:r.uid}})))}));case 32:case"end":return i.stop()}}),null,this)}},{key:"uid",get:function(){return _e.uid}}]),t}(U["c"]));Ot=k["__decorate"]([U["a"]],Ot);var gt=Ot,_t=gt,wt=(n("2625"),Object(s["a"])(_t,yt,vt,!1,null,null,null)),xt=wt.exports;a["default"].use(O["a"]);var Mt=new O["a"]({mode:"history",routes:[{path:"/",name:"game",component:tt,meta:{requiresAuth:!0}},{path:"/signin",name:"signIn",component:lt},{path:"/signup",name:"signUp",component:ft},{path:"/room",name:"room",component:xt,meta:{requiresAuth:!0}}]});Mt.beforeEach((function(e,t,n){var a=e.matched.some((function(e){return e.meta.requiresAuth}));a?S.auth().onAuthStateChanged((function(t){t?n():n({path:"/signin",query:{redirect:e.fullPath}})})):n()}));var Rt=Mt;b["c"].add(p["a"],f["a"],h["a"]),a["default"].use(v["a"]),a["default"].component("font-awesome-icon",y["a"]),a["default"].config.productionTip=!1,new a["default"]({el:"#app",router:Rt,store:m,components:{App:d},render:function(e){return e(d)}}).$mount("#app")},d027:function(e,t,n){},dfb8:function(e,t,n){"use strict";var a=n("1175"),r=n.n(a);r.a},e208:function(e,t,n){},e2ae:function(e,t,n){},e2fe:function(e,t,n){"use strict";var a=n("d027"),r=n.n(a);r.a},ed33:function(e,t,n){"use strict";var a=n("3632"),r=n.n(a);r.a}});
//# sourceMappingURL=app.4ae0fd41.js.map